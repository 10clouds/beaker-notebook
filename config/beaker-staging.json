{
  "id": "/beaker-staging",
  "apps": [
    {
      "id": "/beaker-staging/notebook",
      "cmd": "",
      "cpus": 1,
      "mem": 2048,
      "instances": 1,
      "container": {
        "type": "DOCKER",
        "docker": {
          "network": "BRIDGE",
          "image": "quay.io/mojotech/bunsen-notebook",
          "portMappings": [
            {
              "containerPort": 3003,
              "servicePort": 3003,
              "protocol": "tcp"
            }
          ]
        }
      },
      "env": {
        "NOTEBOOK_PORT": 3003,
        "NOTEBOOK_DATABASE_URI": "datomic:mem://notebook",
        "NOTEBOOK_SEED_FILE": "seed.edn",
        "BAMBOO_HOST": "beaker-staging.withmojo.com",
        "BAMBOO_PATH": "/notebook/"
      },
      "healthChecks": [
        {
          "protocol": "HTTP",
          "path": "/notebook/v1/status",
          "gracePeriodSeconds": 10,
          "intervalSeconds": 10,
          "portIndex": 0,
          "timeoutSeconds": 5,
          "maxConsecutiveFailures": 3
        }
      ],
      "upgradeStrategy": {
        "minimumHealthCapacity": 0
      },
      "uris": [
        "file:///etc/.dockercfg"
      ]
    },
    {
      "id": "/beaker-staging/web",
      "cmd": "",
      "cpus": 1,
      "mem": 512,
      "instances": 1,
      "container": {
        "type": "DOCKER",
        "docker": {
          "network": "BRIDGE",
          "image": "quay.io/mojotech/bunsen-web",
          "portMappings": [
            {
              "containerPort": 8081,
              "hostPort": 0,
              "servicePort": 8081,
              "protocol": "tcp"
            }
          ]
        }
      },
      "env": {
        "WEB_ROOT": "/var/www/public",
        "BAMBOO_HOST": "beaker-staging.withmojo.com",
        "BAMBOO_ACLS": "!{ path_beg -i /notebook/ }"
      },
      "healthChecks": [
        {
          "protocol": "HTTP",
          "path": "/",
          "gracePeriodSeconds": 10,
          "intervalSeconds": 10,
          "portIndex": 0,
          "timeoutSeconds": 5,
          "maxConsecutiveFailures": 3
        }
      ],
      "upgradeStrategy": {
        "minimumHealthCapacity": 0
      },
      "uris": [
        "file:///etc/.dockercfg"
      ]
    }
  ]
}
