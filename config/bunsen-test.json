{
  "id": "/bunsen-test",
  "apps": [
    {
      "id": "/bunsen-test/provisioner",
      "cmd": "",
      "cpus": 0.1,
      "mem": 100,
      "ports": [
        "13001"
      ],
      "instances": 1,
      "container": {
        "type": "DOCKER",
        "docker": {
          "network": "BRIDGE",
          "image": "provisioner",
          "portMappings": [
            {
              "containerPort": 3001,
              "servicePort": "13001",
              "protocol": "tcp"
            }
          ]
        }
      },
      "env": {
        "SERVER_PORT": 3001,
        "PROVISIONER_STRATEGY": "docker",
        "PROVISIONER_DATABASE_URI": "datomic:mem://provisioner",
        "COOKIE_SALT": "r8T`628DaW90*?30)3qRx,2f8h?8(wG13:64K3=w00-8W7g962gM268D0lTS(Uq;^v15mY3gCj-u59k994_/@}W<",
        "BEAKERAUTH_TOKEN": "b59635a9b99b335b499d71801fb6dee555597e34",
        "SCRATCH_SPACE_ROOT": "/var/bunsen/test/beaker",
        "MARATHON_URL": "http://172.17.42.1:8080",
        "APP_GROUP": "/bunsen-test/beaker",
        "APP_TEMPLATE": {
          "container": {
            "type": "DOCKER",
            "docker": {
              "image": "beaker",
              "network": "BRIDGE",
              "portMappings": [
                {
                  "containerPort": 8801
                }
              ]
            }
          },
          "cpus": 0.1,
          "mem": 100,
          "instances": 1
        },
        "SERVICE_HOST": "bunsen-test",
        "SERVICE_PATH": "/beaker"
      },
      "healthChecks": [
        {
          "protocol": "HTTP",
          "path": "/api/v1/status",
          "gracePeriodSeconds": 10,
          "intervalSeconds": 10,
          "portIndex": 0,
          "timeoutSeconds": 5,
          "maxConsecutiveFailures": 3
        }
      ],
      "upgradeStrategy": {
        "minimumHealthCapacity": 0
      }
    },
    {
      "id": "/bunsen-test/marketplace",
      "cmd": "",
      "cpus": 0.1,
      "mem": 100,
      "ports": [
        "8444"
      ],
      "instances": 1,
      "container": {
        "type": "DOCKER",
        "docker": {
          "network": "BRIDGE",
          "image": "provisioner",
          "portMappings": [
            {
              "containerPort": 8444
            }
          ]
        }
      },
      "env": {
        "COOKIE_SALT": "r8T`628DaW90*?30)3qRx,2f8h?8(wG13:64K3=w00-8W7g962gM268D0lTS(Uq;^v15mY3gCj-u59k994_/@}W<",
        "SERVER_PORT": 8444,
        "APP_GROUP": "/bunsen-test/beaker",
        "MARKETPLACE_DATABASE_URI": "datomic:mem://marketplace"
      },
      "healthChecks": [
        {
          "protocol": "HTTP",
          "path": "/marketplace/v1/status",
          "gracePeriodSeconds": 10,
          "intervalSeconds": 10,
          "portIndex": 0,
          "timeoutSeconds": 5,
          "maxConsecutiveFailures": 3
        }
      ],
      "upgradeStrategy": {
        "minimumHealthCapacity": 0
      }
    },
    {
      "id": "/bunsen-test/web",
      "cpus": 0.1,
      "mem": 100,
      "instances": 1,
      "container": {
        "type": "DOCKER",
        "docker": {
          "network": "BRIDGE",
          "image": "web",
          "portMappings": [
            {
              "containerPort": 8080,
              "protocol": "tcp"
            }
          ]
        }
      },
      "env": {
        "ENABLE_COVERAGE": true
      },
      "healthChecks": [
        {
          "protocol": "HTTP",
          "path": "/",
          "gracePeriodSeconds": 10,
          "intervalSeconds": 10,
          "portIndex": 0,
          "timeoutSeconds": 5,
          "maxConsecutiveFailures": 3
        }
      ],
      "upgradeStrategy": {
        "minimumHealthCapacity": 0
      }
    },
    {
      "id": "/bunsen-test/user",
      "cmd": "",
      "cpus": 0.1,
      "mem": 100,
      "ports": [
        3004
      ],
      "instances": 1,
      "container": {
        "type": "DOCKER",
        "docker": {
          "network": "BRIDGE",
          "image": "mojotech/bunsen-user",
          "portMappings": [
            {
              "containerPort": 3004,
              "servicePort": 3004,
              "protocol": "tcp"
            }
          ]
        }
      },
      "env": {
        "USER_PORT": 3004,
        "USER_DATABASE_URI": "datomic:mem://user",
        "BAMBOO_HOST": "bunsen-test",
        "COOKIE_SALT": "r8T`628DaW90*?30)3qRx,2f8h?8(wG13:64K3=w00-8W7g962gM268D0lTS(Uq;^v15mY3gCj-u59k994_/@}W<",
        "BAMBOO_PATH": "/user"
      },
      "healthChecks": [
        {
          "protocol": "HTTP",
          "path": "/user/v1/status",
          "gracePeriodSeconds": 60,
          "intervalSeconds": 10,
          "portIndex": 0,
          "timeoutSeconds": 5,
          "maxConsecutiveFailures": 5
        }
      ],
      "upgradeStrategy": {
        "minimumHealthCapacity": 0
      }
    }
  ]
}
