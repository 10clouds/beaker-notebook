form.dataset-edit(name="datasetEditForm")
  .col-half
    label Title
    input(placeholder="title" ng-model="dataset.title")
    label Catalog
    input(disabled ng-if="!creating" placeholder="catalog" ng-model="dataset.catalog.name")
    select(ng-if="creating" ng-model="tmpCatalog" ng-change="setNewCatalog(tmpCatalog, dataset)")
      option(disabled selected="selected") Select a catalog
      option(ng-repeat="catalog in catalogs" ng-value="catalog.index") {{catalog.name}}
    .dataset-description(ng-if="datasetHas('description')")
      label Description
      textarea(ng-model="dataset.description", placeholder="Enter a description")
    .dataset-vendor(ng-if="datasetHas('vendor')")
      label Vendor
      input.dataset-vendor-field(placeholder="vendor"
            ng-model="vendorName"
            typeahead-on-select="updateVendor($item)"
            typeahead="vendor['public-id'] as vendor.name for vendor in vendors | filter:$viewValue"
            typeahead-min-length=3)
    .dataset-format(ng-if="datasetHas('format')")
      label Format
      input.dataset-format-field(placeholder="format"
            ng-model="dataset.format"
            typeahead="format for format in formats | filter:$viewValue"
            typeahead-min-length=1)
    .dataset-release-date(ng-if="datasetHas('releaseDate')")
      label Release Date
      input(type="date" placeholder="released" ng-model="dataset.releaseDate")
    .dataset-start-date(ng-if="datasetHas('startDate')")
      label Start Date
      input(type="date" placeholder="start date" ng-model="dataset.startDate")
    .dataset-update-frequency(ng-if="datasetHas('updateFrequency')")
      label Update Frequency
      input(placeholder="Update Frequency" ng-model="dataset.updateFrequency")
    .dataset-tags(ng-if="datasetHas('tags')")
      label Tags
      tags(dataset-tags="dataset.tags")
    .dataset-category(ng-if="datasetHas('categories')")
      label Category
      input.dataset-category-field(placeholder="Category"
            ng-model="dataset.categories[0].name"
            typeahead="category as label(category) for category in getCategories($viewValue)"
            typeahead-min-length=2
            typeahead-on-select="onSelect($item)"
            typeahead-editable="false"
            required)
    .dataset-remote-file-location(ng-if="datasetHas('remoteFile')")
      label Remote File Location
      input(placeholder="Location" ng-model="dataset.remoteFile")
  .col-half
    .dataset-previews(ng-if="datasetHas('dataPreviews')")
      h4 Previews
      ul
        li(ng-repeat="preview in dataset.dataPreviews")
          img(ng-if="preview.smallPreviewUrl" ng-src="{{preview.smallPreviewUrl}}")
      label Table preview entry
      textarea(disabled placeholder="Table preview entry") {{dataset['table-preview']}}
    .btn-group
      .btn.submit-dataset-edit.alt(ng-click="onEdit(dataset)" ) {{creating ? 'Create' : 'Update'}}
      .btn.delete-dataset(ng-click="deleteEntity(dataset)" ng-if="!creating") Delete
