.sidebar-right
  .sidebar-box.light
    h3
      | About this project
      a.sidebar-box-header-icon(ng-click="editProject()")
        img(src="images/edit.png", width="14", height="14")
    .content
      p.project-description-display(ng-hide="editMode") {{project.description}}
      textarea.project-description(name="description", maxlength= "1500" ng-model="newAttributes.description" ng-show="editMode")
        | Project description...
      .char-count-container
        a.btn.btn-light.update-project.left(ng-show="editMode", ng-click="updateProject()") Save
        h4.char-count(ng-show="editMode") ({{ 1500 - newAttributes.description.length}} characters remaining)
      .cl
  .sidebar-box.light
    h3 Disk Space
    .content
      .btn-group.file-actions
        h4 Scratch space utilization
        .disk-usage
          .bar
            .progress(style="{{'width:' + diskUsage.percent}}%")
          p
            span.gigabytes {{diskUsage.total | humanizeFilesize}}
            | &nbsp; of {{diskUsage.quota | humanizeFilesize}} used

        .upload-progress(ng-show='uploadPercentage')
          .bar
            .progress(style="{{'width:' + uploadPercentage}}%")
        .message {{fileUploadMessage}}
        file-uploader(message="fileUploadMessage" upload-percentage="uploadPercentage" on-uploaded="updateUsage()")
        file-upload-list(update-usage="updateUsage()")

.two-sidebars
  .main-content.project-detail
    notice.error(message="error")
    h1.project-name
      span(ng-hide="editMode") {{project.name}}
      input(name="name", ng-model="newAttributes.name", ng-show="editMode")
    a.btn.btn-light.update-project-top-btn(ng-show="editMode", ng-click="updateProject()") Save

    .right.project-menu
      span.options.bunsen-dropdown-toggle
        .bunsen-dropdown-wrapper
          ul.bunsen-dropdown
            li(ng-hide="editMode")
              a.edit-project(ng-click="editProject()") Edit
            li(ng-show="editMode")
              a.update-project(ng-click="updateProject()") Save
            li
              a.delete-project(confirm="Are you sure you want to delete \"{{project.name}}\" AND all of the associated notebooks?" on-confirm="deleteProject()") Delete
    .cl

    section.section-padding-top.overview
      .col-half
        h4 Properties
        ul.property-list.small
          li
            .label Last used
            .value {{project.lastExecuted || "N/A" | date: 'short'}}
          li
            .label Updated
            .value.last-updated {{project['last-updated-at'] | date: 'short'}}

      .col-half
        h4 Recently Used Notebooks
        ul.link-list.recently-used
          li(ng-repeat="notebook in project.notebooks | orderBy:openedAt:true | limitTo:4")
            a(ng-click="openNotebook(notebook)") {{notebook.name}}

    section
      h2 Notebooks
      ul.notebook-list.bunsen-list
        li(ng-if="project.notebooks.length === 0") no notebooks yet.
        li.skinny.bunsen-list-item(ng-repeat="notebook in project.notebooks | orderBy:'name'")
          .col-half.padding-reset
            h2
              a(ng-click="openNotebook(notebook)") {{notebook.name}}

          .right
            span.text-small.notebook-last-used  Last used on
              span.text-green.date {{notebook['updated-at'] | date: 'short'}}
            span.notebook-options
              span.options.bunsen-dropdown-toggle
                ul.bunsen-dropdown
                  li
                    a.rename(ng-click="renameNotebook(notebook)") Rename
                  li(ng-if="projects.list.length > 1")
                    a.move.bunsen-dropdown-toggle.dropright-arrow(notebook-move project-id="project['public-id']" notebook="notebook" projects="projects.list" on-move="loadProject()" on-error="alreadyExistsError(notebook, project)")
                  li
                    a.destroy(confirm="Are you sure you want to delete {{ notebook.name }}?" on-confirm="deleteNotebook(notebook)") Delete
                  li
                    a.export(ng-click="exportNotebook(notebook['public-id'])") Export
          .cl
          p.warning(ng-if="notebook.unavailable") This notebook is unavailable. Please contact support.

      span.import-notebooks.btn-group
        a.btn.btn-light.new-notebook(ng-click="createNotebook()") New Notebook
        span(hidden-upload="true")
          a.import.btn-light.btn Import
          input.visibility-hidden.import-notebook(type="file" ng-file-select="onFileSelect($files)" multiple)
          notice.error(message="importError")

